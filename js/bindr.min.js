!function(){angular.module("bindr",[]);$("#bindr-nav-title").text(bindrCfg.i18n.bindrName)}();
!function(){angular.module("bindr").service("i18nSvc",function(){return{navigation:{userMenu:"User Menu",myPages:"My Pages",myProfile:"My profile",myBindrs:"My binders",quickActions:"Quick Actions",createBindr:"New binder",importToBindr:"Import cards",signUpTitle:"Sign up for "+bindrCfg.i18n.bindrName,signInTitle:"Sign in to "+bindrCfg.i18n.bindrName,signOutTitle:"Sign out of "+bindrCfg.i18n.bindrName,firstname:"First name",lastname:"Last name",email:"Email address",confirmEmail:"Confirm your email address",username:"Username",chooseUsername:"Choose a username",password:"Password",choosePassword:"Choose a password",confirmPassword:"Confirm your password",signUp:"Sign Up",signIn:"Sign In",cancel:"Cancel",close:"Close",yes:"Yes",aboutToSignOut:"You are about to sign out of "+bindrCfg.i18n.bindrName+".",areYouSure:"Are you sure?",errors:{signUp:{incomplete:"Please ensure you have filled out all the fields properly and try again.",invalid:"Encountered an error when registering your new account. Please check your information and try again.",unexpected:"Encountered an unexpected error when registering your account."},signIn:{incomplete:"Please enter your username and password and try again.",invalid:"Your username and/or password appears to be invalid. Please correct the error and try again.",unexpected:"Encountered an unexpected error when signing in."}}},pages:{faq:{title:"Wecome to "+bindrCfg.i18n.bindrName+".",whatIs:"What is "+bindrCfg.i18n.bindrName+"?",whatIsDesc:"Simply put, "+bindrCfg.i18n.bindrName+" is a digital organization and sharing system for your Magic: the Gathering card collection.",howImport:"How do I get my cards into "+bindrCfg.i18n.bindrName+"?",howImportDesc:"You can either import your cards into "+bindrCfg.i18n.bindrName+" with our easy to use import tools, or you can build our your collection manually using our creation and search tools.",howManage:"How do I manage my collection?",howManageDesc:"As you add cards, "+bindrCfg.i18n.bindrName+" keeps track of your overall collection. You create individual binders as a means of organizing your collection. A binder can represent a view of a small set of your collection, a deck, or even your cube list. You can create, rename, or destroy binders at your discretion and "+bindrCfg.i18n.bindrName+" will keep track of your overall collection for you.",howShare:"How do I share my binders?",howShareDesc:"Using our sharing tools, you can share your binders with other "+bindrCfg.i18n.bindrName+" members, or with everybody via URL or through social services you already use every day.",howRemove:"Can I remove cards from "+bindrCfg.i18n.bindrName+"?",howRemoveDesc:"Yes, of course. Keep only the cards you want to in "+bindrCfg.i18n.bindrName+". Should you want to remove cards you have added, removing them is quick and easy."},profile:{},bindrs:{}}}})}();
!function(){angular.module("bindr").service("pageService",function(){this.goToFaq=function(){},this.goToProfile=function(){},this.goToBindrs=function(){}})}();
!function(){angular.module("bindr").controller("NavigationCtrl",function(i18nSvc){this.i18n=i18nSvc.navigation,this.signUpError=!1,this.signInError=!1,this.signedIn=!1,this.showSignUp=function(){this._clearSignUp(),$("#bindr-sign-in-dlg").modal("hide"),$("#bindr-sign-up-dlg").modal("show")},this.hideSignUp=function(){$("#bindr-sign-up-dlg").modal("hide"),this.showSignIn()},this.showSignIn=function(){this._clearSignIn(),$("#bindr-sign-in-dlg").modal("show")},this.showSignOut=function(){$("#bindr-sign-out-dlg").modal("show")},this.checkForEnter=function(evt,workflow){13===evt.keyCode&&(workflow&&"signup"===workflow?this.signUp():this.signIn())},this.signUp=function(){var self=this,newUser={firstName:$("#signup-firstname").val(),lastName:$("#signup-lastname").val(),email:$("#signup-email").val(),confirmEmail:$("#signup-confirmemail").val(),username:$("#signup-username").val(),passwordd:$("#signin-password").val(),confirmPassword:$("#signin-confirmpassword").val()},credentials={username:newUser.username,password:newUser.password};self._clearSignUpError(),self._validNewUser(newUser)&&self._registerUser(newUser).done(function(registerResult){!registerResult||registerResult.code||registerResult.errorCode?self._setSignUpError(self.i18n.errors.signUp.invalid):self.signIn(credentials)}).fail(function(){self._setSignUpError(self.i18n.errors.signUp.unexpected)})},this.signIn=function(userCredentials){var self=this,credentials=userCredentials||{usr:$("#signin-username").val(),pwd:$("#signin-password").val()};self._clearSignInError(),self._validSignIn(credentials)&&self._authenticate(credentials).done(function(result){!result||result.code||result.errorCode?userCredentials||self._setSignInError(self.i18n.errors.signIn.invalid):(self._clearSignIn(),$.cookie("bindr",{username:credentials.usr}),self._transitionToSignedIn())}).fail(function(){userCredentials||self._setSignInError(self.i18n.errors.signIn.unexpected)})},this.signOut=function(){bindrCfg.cookie=null,$.removeCookie("bindr"),this._transitionToSignedOut()},this._clearSignUp=function(){$("#signup-firstname").val(""),$("#signup-lastname").val(""),$("#signup-email").val(""),$("#signup-confirmemail").val(""),$("#signup-username").val(""),$("#signup-password").val(""),$("#signup-confirmpassword").val("")},this._clearSignIn=function(){$("#signin-username").val(""),$("#signin-password").val("")},this._checkForAuthenticatedUser=function(){bindrCfg.cookie=$.cookie("bindr"),this.signedIn=!!bindrCfg.cookie,this.signedIn&&this._transitionToSignedIn()},this._registerUser=function(){return $("<body>").promise()},this._authenticate=function(){return $("<body>").promise()},this._setSignUpError=function(message){$("#bindr-sign-up-error").text(message),this.signUpError=!0},this._setSignInError=function(message){$("#bindr-sign-in-error").text(message),this.signInError=!0},this._clearSignUpError=function(){$("#bindr-sign-up-error").text(""),this.signUpError=!1},this._clearSignInError=function(){$("#bindr-sign-in-error").text(""),this.signInError=!1},this._validNewUser=function(){var isValid=!1;return isValid||this._setSignUpError(this.i18n.errors.signUp.incomplete),isValid},this._validSignIn=function(credentials){var isValid=credentials.username&&credentials.username.length>0&&credentials.password&&credentials.password.length>0;return isValid||this._setSignInError(this.i18n.errors.signInIncomplete),isValid},this._transitionToSignedIn=function(newUser){newUser?$("#bindr-sign-up-dlg").modal("hide"):$("#bindr-sign-in-dlg").modal("hide"),$("#bindr-sign-in").addClass("display_none"),$("#bindr-user-menu").removeClass("display_none"),$("#bindr-sign-out").removeClass("display_none")},this._transitionToSignedOut=function(){$("#bindr-sign-out-dlg").modal("hide"),$("#bindr-sign-in").removeClass("display_none"),$("#bindr-user-menu").addClass("display_none"),$("#bindr-sign-out").addClass("display_none")},this._init=function(){this._checkForAuthenticatedUser(),$("#bindr-sign-up-dlg").on("shown.bs.modal",function(){$("#signup-firstname").focus()}),$("#bindr-sign-in-dlg").on("shown.bs.modal",function(){$("#signin-username").focus()})},this._init()})}();
!function(){angular.module("bindr").controller("PageController",function(i18nSvc){this.i18n=i18nSvc.pages})}();